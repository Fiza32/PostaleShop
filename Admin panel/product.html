<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="first.css">

    
</head>


<body>
    <div class="container">
      
        <aside>
            <div class="logo">
                <img src="logo.jpeg" alt="">
                
            </div>
            <nav>
               
                <div class="nav_cont">
                    <div class="nav_item">
                        
                        <i class="fa fa-user" aria-hidden="true"></i>
                        
                        <a href="customer.html">Customer</a>
                        
                    </div>
                    <div class="nav_item">
                        <i class="fa-solid fa-sack-dollar"></i>
                        <a href="order.html">Orders</a>
                        
                    </div>
                    <div class="nav_item" id="active">
                        <i class="fa fa-tag" aria-hidden="true"></i>
                        <a href="product.html">Products</a>
                        
                    </div>
                    <div class="nav_item">
                        <i class="fa-solid fa-percent"></i>
                        <a href="discount.html">Discount</a>
                        
                    </div>
                    <div class="nav_item">
                        <i class="fa fa-usd" aria-hidden="true"></i>
                        <a href="pricing.html">Pricing</a>
                        
                    </div>
                </div>
            </nav>
        
        
        </aside>

        <main class="first">
           <div class="body_part">
                <header>
                    <div class="left">
                        <input type="search" name="" value="" id="searchInput" placeholder="Search here">
                    </div>
                    <div class="right">
                        <i class="fa-regular fa-circle-question" id="searchbtn"></i>
                        <i class="fa-regular fa-bell"></i>
                        <img src="../images/profile.png" alt="" style="width:50px;height:50px">
                    </div>
                </header>

               
           </div>

           <div class="body_part1">
                <div class="heading1">
                    <div class="left">
                        <h2>Products</h2>
                        
                    </div>
                    <div class="right">
                        <i class="fa-solid fa-plus" id="addProductbtn"></i>
                        <h2>New Product</h2>
                    </div>
                </div>

                <div class="heading2">
                    <select name="" id="">
                        <option value="">A</option>
                        <option value="">B</option>
                        <option value="">C</option>
                    </select>

                    <!-- <input type="search" name="" value=""> -->
                </div>

                <div class="table_data">
                    <table class="product_table" >
                        <thead>
                            <tr>
                                <th class="name">Name</th>
                                <th class="coll">Category</th>
                                <th class="inv">Quantity</th>
                                <th class="ava">Availibility</th>
                                <th class="update">Update</th>
                                <th class="dele">Delete</th>
                            </tr>
                        </thead>
                        <tbody>
                           
                        </tbody>
                    </table>
                </div>

           </div>
        </main>
    </div>

    <div class="popup">
        <div class="close-btn">&times;</div>
        <div class="form">
          <h2>Add Product</h2>
  
          <div class="form-element">
            <label for="name">Name</label>
            <input type="text" id="name" required />
          </div>
  
          <div class="form-element">
            <label for="name">Description</label>
            <input type="text" id="desc" required />
          </div>
          <div class="form-element">
            <label for="name">quantity</label>
            <input type="number" id="quantity" required />
          </div>
          <div class="form-element">
            <label for="name">Price</label>
            <input type="number" id="price" required />
          </div>
          <div class="form-element">
            <label for="name">Comp Price</label>
            <input type="number" id="compprice" required />
          </div>
          <div class="form-element">
            <label for="name">Category</label>
            <input type="text" id="category" required />
          </div>
          <div class="form-element">
            <label for="name">Color</label>
            <input type="text" id="color" required />
          </div>

  
          <div class="form-element">
            <input type="submit" id="product_submit" />
          </div>
        </div>
      </div>
  
     
      
  
</body>

<script>

    let url = "https://63c9170d320a0c4c9540575f.mockapi.io/products";

    let productArr = [];

document.getElementById("addProductbtn").addEventListener("click",function(){
    document.querySelector(".popup").classList.add("active");
})
document.querySelector(".close-btn").addEventListener("click",function(){
    document.querySelector(".popup").classList.remove("active");
});

let parent = document.querySelector("tbody");

document.getElementById("product_submit").addEventListener("click",function(){

    let name = document.getElementById("name").value;
    let badge = document.getElementById("desc").value;
    let Compprice = document.getElementById("compprice").value;
    let price = document.getElementById("price").value;
    let colors = document.getElementById("color").value;
    let category = document.getElementById("category").value;
    let quantity = document.getElementById("quantity").value;

    let obj = {
        src:"https://www.aeropostale.com/dw/image/v2/BBSG_PRD/on/demandware.static/-/Sites-master-catalog-aeropostale/default/dwa0d6efa1/60211060_035_main.jpg?sw=478&sh=557&sm=fit&sfrm=jpg",
        badge : badge,
        name : name,
        Compvalue : Compprice,
        price : price,
        ratings : 0,
        color: colors,
        category : category,
        customerId : "premkumar",
        totalquantity : quantity,
        status : "pending",
        ispurchased : false
    }

    if(name != "" && badge != "" && Compprice != "" && price != "" 
    && colors != "" && category != "" && quantity != ""){
        postProduct(obj);
        document.querySelector(".popup").classList.remove("active");
    }else{
        alert("Every field is required!")
    }


   
})


async function postProduct(product){
    try{
        let res = await fetch(url,{
            method:"POST",
            headers : {
                "Content-type":"application/json",
            },
            
            body:JSON.stringify(product)
        });
        let out = await res.json();
       
        console.log(out);
      
    }catch(err){
        alert(JSON.stringify(err))
    }

}


async function getdata(){
    
   try{
    let res = await fetch(url);
    res = await res.json();
    productArr = res;
    console.log(res);
    display(res)

   }catch(err){
    console.log(JSON.stringify(err))
   }
}


window.addEventListener("load",function(){
    getdata();
})


function display(data){

    parent.innerText = "";

    data.forEach(element => {
        let tr = document.createElement("tr");

        let name = document.createElement("td");
        name.classList.add("name");
        name.textContent = element.name;

        let category = document.createElement("td");
        category.classList.add("coll")
        category.textContent = element.category;

        let quantity = document.createElement("td");
        quantity.classList.add("inv");

        quantity.textContent = element.totalquantity;

        let availibility = document.createElement("td");
        availibility.classList.add("ava")
        if(element.quantity > 0){
            availibility.textContent = "Available";
        }else{
            availibility.textContent = "Not Available";
        }
        

        let edit = document.createElement("td");
        edit.classList.add("update");
        edit.textContent = "Edit";

        let deleteitem = document.createElement("td");
        deleteitem.classList.add("dele")
        deleteitem.textContent = "Delete";

        tr.append(name,category,quantity,availibility,edit,deleteitem);
        parent.append(tr)
    });

  
//  searching


document.getElementById("searchbtn").addEventListener("click",function(){

    let searchtext = document.getElementById("searchInput").value;
    let filterarr = productArr.filter((ele)=>{
        if(ele.name.toLowerCase().includes(searchtext.toLowerCase())){
            return true;
        }

        // if(ele.category==searchtext){
        //     return true
        // }
    })

   

    display(filterarr)

})


}
</script>
</html>